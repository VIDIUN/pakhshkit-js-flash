!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("playkit-js")):"function"==typeof define&&define.amd?define(["playkit-js"],t):"object"==typeof exports?exports.flash=t(require("playkit-js")):(e.playkit=e.playkit||{},e.playkit.flash=t(e.KalturaPlayer.core))}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAME=t.VERSION=void 0;var i=n(0),a=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r.default,t.VERSION="1.0.1",t.NAME="playkit-js-flash";r.default.runCapabilities(),r.default.getCapabilities().then(function(e){e.flash.isSupported&&i.Engines.push(r.default)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),c=n(3),f=i(c),h=n(4),p=i(h),v=function(e){function t(e,n){r(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i._eventManager=new s.EventManager,i._api=new p.default(e,n),i._el=i._api.attach(i._el),i._addBindings(),i.src=e.url,i}return o(t,e),l(t,null,[{key:"createEngine",value:function(e,t){return new this(e,t)}},{key:"canPlaySource",value:function(e,t){return!0}},{key:"runCapabilities",value:function(){t._capabilities.forEach(function(e){return e.runCapability()})}},{key:"getCapabilities",value:function(){var e=[];return t._capabilities.forEach(function(t){return e.push(t.getCapability())}),Promise.all(e).then(function(e){var n={};return e.forEach(function(e){return Object.assign(n,e)}),a({},t.id,n)})}},{key:"prepareVideoElement",value:function(){}}]),l(t,[{key:"_addBindings",value:function(){var e=this;this._api&&(this._eventManager.listen(this._api,s.EventType.TRACKS_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.ERROR,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.TIME_UPDATE,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.PLAYING,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.TIME_UPDATE,function(t){e.dispatchEvent(t),e._currentTime=t.payload.position,e._duration=t.payload.duration,e._buffer=t.payload.buffer,e._watched=t.payload.watched}),this._eventManager.listen(this._api,s.EventType.PAUSE,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.LOADED_METADATA,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.LOADED_DATA,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.PLAY,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._api,s.EventType.VOLUME_CHANGE,function(t){return e.dispatchEvent(t)}))}},{key:"getVideoElement",value:function(){return this._el}},{key:"load",value:function(e){var t=this;this._api.load(e),this._loadPromise=new Promise(function(e){t._eventManager.listenOnce(t._api,s.EventType.TRACKS_CHANGED,function(){e()})})}},{key:"play",value:function(){var e=this;this._loadPromise||this.load(),this._loadPromise.then(function(){e._api.play()}),window.api=this._api}},{key:"pause",value:function(){this._api.pause()}},{key:"isLive",value:function(){return!1}},{key:"src",set:function(e){this._src=e},get:function(){return this._src?this._src:""}},{key:"currentTime",get:function(){return this._currentTime?this._currentTime:0},set:function(e){this._api.seek(e)}},{key:"duration",get:function(){return this._api.getDuration()}},{key:"volume",set:function(e){this._volume=e,this._api.volume(e)},get:function(){return this._volume}},{key:"paused",get:function(){return!1}},{key:"seeking",get:function(){return!1}},{key:"seekable",get:function(){return 0}},{key:"played",get:function(){return this._watched}},{key:"buffered",get:function(){var e=this;return{length:1,start:function(){return 0},end:function(){return e._buffer}}}},{key:"muted",set:function(e){e?(this._volumeBeforeMute=this.volume,this.volume=0):this._volumeBeforeMute?this.volume=this._volumeBeforeMute:this.volume=1},get:function(){return 0==this.volume}},{key:"defaultMuted",get:function(){return!1}}]),t}(s.FakeEventTarget);v._capabilities=[f.default],v.id="flash",t.default=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(n(0),function(){function e(){i(this,e)}return a(e,null,[{key:"runCapability",value:function(){var t="0,0,0";try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}e._result=t.split(",")[0]>=10}},{key:"getCapability",value:function(){return Promise.resolve({isSupported:e._result})}}]),e}());t.default=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),l=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._firstPlay=!0,r._config=n,r._src=e,r}return r(t,e),u(t,null,[{key:"getFlashCode",value:function(e,t,n,i){var a="",r="",u="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){a+=e+"="+t[e]+"&amp;"}),n=o.Utils.Object.mergeDeep({movie:e,flashvars:a,allowScriptAccess:"always",allowNetworking:"all",wmode:"transparent",bgColor:"#0",quality:"autohigh"},n),Object.getOwnPropertyNames(n).forEach(function(e){r+='<param name="'+e+'" value="'+n[e]+'" />'}),i=o.Utils.Object.mergeDeep({data:e,width:"100%",height:"100%"},i),Object.getOwnPropertyNames(i).forEach(function(e){u+=e+'="'+i[e]+'" '}),'<object type="application/x-shockwave-flash" '+u+">"+r+"</object>"}}]),u(t,[{key:"attach",value:function(e){var n=this;this._el=e,this._el=o.Utils.Dom.createElement("div"),this._el.innerHTML=t.getFlashCode("http://flashls.org/flashls-0.4.4.24/bin/debug/flashlsChromeless.swf?inline=1",{callback:"flashlsCallback"});var i={ready:function(e){n._api=new s.default(n._el.firstElementChild),null!=n._initalVolume&&n.volume(n._initalVolume),n._waitingForLoad&&n.load(),n._waitingForPlay&&n.play(),n._config.debug&&(n._api.playerSetLogDebug(!0),n._api.playerSetLogDebug2(!0))},videoSize:function(e,t){},levelLoaded:function(e){n._trigger(o.EventType.TRACKS_CHANGED,e),n._trigger(o.EventType.LOADED_METADATA,e)},complete:function(){n._trigger(o.EventType.ENDED)},position:function(e){n._trigger(o.EventType.TIME_UPDATE,e)},error:function(e,t,i){var a=new Error(Error.Severity.CRITICAL,Error.Category.MEDIA,Error.Code.VIDEO_ERROR,{code:e,extended:t,message:i});n._trigger(o.EventType.ERROR,a)},manifest:function(e,t,i){n._trigger(o.EventType.LOADED_DATA,i)},state:function(e){switch(e){case"PLAYING_BUFFERING":case"PLAYING":n._trigger(o.EventType.PLAYING),n._firstPlay=!1;break;case"PAUSED_BUFFERING":case"PAUSED":n._trigger(o.EventType.PAUSE)}}};return window.flashlsCallback=function(e,t){i[e]&&i[e].apply(null,t)},this._el}},{key:"load",value:function(e){e&&(this._startTime=e),this._api?this._api.load(this._src.url):this._waitingForLoad=!0}},{key:"play",value:function(){this._api?(this._firstPlay?this._api.play(this._startTime?this._startTime:-1):this._api.resume(),this._trigger(o.EventType.PLAY)):this._waitingForPlay=!0}},{key:"pause",value:function(){this._api.pause()}},{key:"seek",value:function(e){this._api.seek(e)}},{key:"volume",value:function(e){this._api?(this._api.volume(100*e),this._trigger(o.EventType.VOLUME_CHANGE)):this._initalVolume=e}},{key:"getDuration",value:function(){return this._api.getDuration()}},{key:"_trigger",value:function(e,t){this.dispatchEvent(new o.FakeEvent(e,t))}}]),t}(o.FakeEventTarget);t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.flashObject=t}return a(e,[{key:"load",value:function(e){this.flashObject.playerLoad(e)}},{key:"play",value:function(e){this.flashObject.playerPlay(e)}},{key:"pause",value:function(){this.flashObject.playerPause()}},{key:"resume",value:function(){this.flashObject.playerResume()}},{key:"seek",value:function(e){this.flashObject.playerSeek(e)}},{key:"stop",value:function(){this.flashObject.playerStop()}},{key:"volume",value:function(e){this.flashObject.playerVolume(e)}},{key:"setCurrentLevel",value:function(e){this.flashObject.playerSetCurrentLevel(e)}},{key:"setNextLevel",value:function(e){this.flashObject.playerSetNextLevel(e)}},{key:"setLoadLevel",value:function(e){this.flashObject.playerSetLoadLevel(e)}},{key:"setMaxBufferLength",value:function(e){this.flashObject.playerSetmaxBufferLength(e)}},{key:"getPosition",value:function(){return this.flashObject.getPosition()}},{key:"getDuration",value:function(){return this.flashObject.getDuration()}},{key:"getbufferLength",value:function(){return this.flashObject.getbufferLength()}},{key:"getbackBufferLength",value:function(){return this.flashObject.getbackBufferLength()}},{key:"getLowBufferLength",value:function(){return this.flashObject.getlowBufferLength()}},{key:"getMinBufferLength",value:function(){return this.flashObject.getminBufferLength()}},{key:"getMaxBufferLength",value:function(){return this.flashObject.getmaxBufferLength()}},{key:"getLevels",value:function(){return this.flashObject.getLevels()}},{key:"getAutoLevel",value:function(){return this.flashObject.getAutoLevel()}},{key:"getCurrentLevel",value:function(){return this.flashObject.getCurrentLevel()}},{key:"getNextLevel",value:function(){return this.flashObject.getNextLevel()}},{key:"getLoadLevel",value:function(){return this.flashObject.getLoadLevel()}},{key:"getAudioTrackList",value:function(){return this.flashObject.getAudioTrackList()}},{key:"getStats",value:function(){return this.flashObject.getStats()}},{key:"setAudioTrack",value:function(e){this.flashObject.playerSetAudioTrack(e)}},{key:"playerSetLogDebug",value:function(e){this.flashObject.playerSetLogDebug(e)}},{key:"getLogDebug",value:function(){return this.flashObject.getLogDebug()}},{key:"playerSetLogDebug2",value:function(e){this.flashObject.playerSetLogDebug2(e)}},{key:"getLogDebug2",value:function(){return this.flashObject.getLogDebug2()}},{key:"playerSetUseHardwareVideoDecoder",value:function(e){this.flashObject.playerSetUseHardwareVideoDecoder(e)}},{key:"getUseHardwareVideoDecoder",value:function(){return this.flashObject.getUseHardwareVideoDecoder()}},{key:"playerSetflushLiveURLCache",value:function(e){this.flashObject.playerSetflushLiveURLCache(e)}},{key:"getflushLiveURLCache",value:function(){return this.flashObject.getflushLiveURLCache()}},{key:"playerSetJSURLStream",value:function(e){this.flashObject.playerSetJSURLStream(e)}},{key:"getJSURLStream",value:function(){return this.flashObject.getJSURLStream()}},{key:"playerCapLeveltoStage",value:function(e){this.flashObject.playerCapLeveltoStage(e)}},{key:"getCapLeveltoStage",value:function(){return this.flashObject.getCapLeveltoStage()}},{key:"playerSetAutoLevelCapping",value:function(e){this.flashObject.playerSetAutoLevelCapping(e)}},{key:"getAutoLevelCapping",value:function(){return this.flashObject.getAutoLevelCapping()}}]),e}();t.default=r}])});
//# sourceMappingURL=playkit-js-flash.js.map